# Architecture Decision Records (ADRs)

Este diretório contém as decisões arquiteturais importantes do projeto AI User Control, documentadas no formato ADR (Architecture Decision Record).

## Índice de ADRs

### Core Architecture

| ADR | Titulo | Status | Data |
|-----|--------|--------|------|
| [ADR-001](ADR-001-framework-spring-boot.md) | Escolha do Spring Boot como Framework Base | ✅ Accepted | 2026-01-22 |
| [ADR-002](ADR-002-database-sqlite.md) | Escolha do SQLite como Banco de Dados | ⚠️ Superseded | 2026-01-22 |
| [ADR-003](ADR-003-layered-architecture.md) | Arquitetura em Camadas (Layered Architecture) | ⚠️ Superseded | 2026-01-22 |
| [ADR-004](ADR-004-api-integration-pattern.md) | Padrao de Integracao com APIs Externas | ✅ Accepted | 2026-01-22 |

## Mapa de Dependências

```mermaid
graph LR
    ADR001[ADR-001<br/>Spring Boot] --> ADR003[ADR-003<br/>Layered Architecture]
    ADR001 --> ADR004[ADR-004<br/>API Integration]
    ADR002[ADR-002<br/>SQLite] --> ADR003
    ADR003 --> ADR004
```

## Visão Geral das Decisões

### Stack Tecnologica

**Framework:** Spring Boot 3.5.10
**Linguagem:** Java 21 LTS
**Build Tool:** Maven
**CLI Framework:** Spring Shell (modo nao-interativo)
**HTTP Client:** Spring WebClient
**Exportacao:** Apache Commons CSV

### Padroes Arquiteturais

**Arquitetura:** 3 camadas (Integration -> Service -> Runner)
- **Integration:** API Clients (Claude, GitHub, Cursor, Google Workspace)
- **Service:** Logica de negocio (coleta, unificacao, exportacao CSV)
- **Runner:** CommandLineRunner para execucao automatizada

**Integracao APIs:** Strategy Pattern
- Interface comum: `ToolApiClient`
- Implementacoes especificas por ferramenta
- Retry com exponential backoff
- Conditional bean loading

### Principios de Design

- ✅ **Separation of Concerns:** Cada camada tem responsabilidade unica
- ✅ **Dependency Inversion:** Dependencias via interfaces
- ✅ **Single Responsibility:** Classes focadas e coesas
- ✅ **Open/Closed:** Extensivel sem modificar codigo existente (Strategy Pattern)
- ✅ **Testability:** 107+ testes unitarios com cobertura >80%

## Como Usar Este Diretório

### Lendo ADRs

Cada ADR segue a estrutura:
1. **Context:** Problema/decisão que precisa ser feita
2. **Decision:** Solução escolhida
3. **Consequences:** Impactos positivos e negativos
4. **Alternatives Considered:** Opções rejeitadas e motivos
5. **Implementation Notes:** Detalhes técnicos e exemplos

### Propondo Novos ADRs

1. Criar issue no GitHub com label `architecture`
2. Discutir com equipe (@Architect, @Dev, @DevOps, @Product)
3. Criar ADR seguindo template
4. Numerar sequencialmente (ADR-005, ADR-006, etc)
5. Atualizar este README com novo ADR

### Template de ADR

```markdown
# ADR-XXX: [Título]

**Status:** [Proposed | Accepted | Deprecated | Superseded]
**Date:** YYYY-MM-DD
**Deciders:** @Architect, @Dev, @DevOps, @Product

## Context
[Descrever o problema/decisão]

## Decision
[Descrever a solução escolhida]

## Consequences

### Positive
- [Benefício 1]

### Negative
- [Trade-off 1]

## Alternatives Considered
1. **Opção 1:** [descrição] - Rejeitado porque [motivo]

## Implementation Notes
[Detalhes técnicos, diagramas, exemplos]

## Related ADRs
- ADR-XXX: [título]

---
> *Generated by Claude Code - @Architect*
```

## Status dos ADRs

- **Proposed:** Decisão proposta, aguardando discussão
- **Accepted:** Decisão aceita e em uso
- **Deprecated:** Decisão obsoleta mas mantida para histórico
- **Superseded:** Substituída por outro ADR

## Atualizacoes

### 2026-02-10
- ⚠️ ADR-002 (SQLite) marcado como Superseded — projeto usa exportacao CSV sem banco
- ⚠️ ADR-003 (6 camadas) marcado como Superseded — arquitetura atual usa 3 camadas
- ✅ ADR-001 atualizado para Java 21 / Spring Boot 3.5.10

### 2026-01-22
- ✅ Criados ADRs 001 a 004 (decisoes core)
- ✅ Estabelecida arquitetura base do projeto
- ✅ Definidas tecnologias principais

## Referências

- [Architecture Decision Records (ADR)](https://adr.github.io/)
- [Documenting Architecture Decisions](https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions)
- [ADR Tools](https://github.com/npryce/adr-tools)

---

> *Mantido por: @Architect*
> *Ultima atualizacao: 2026-02-10*
